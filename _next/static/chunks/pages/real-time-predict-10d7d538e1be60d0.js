(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{1455:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var r=n(3102),a=n(8817),i=n(7628),s=n.n(i),o=n(959),c=n(4083),l=n(9175),u=n(6554),d=n(9006),h=n(8524),f=n(4371),x=n(5260),v=n(5925),m=n(9777),g=n(8777),p=n(6980),j=n(8273),Z=n(4761),b=function(){var e;return function(t){var n;if(t>100)return 3.5;if(!e){e=[];for(var r=0;r<=100;r++){var a;e[r]=(null!==(a=e[r-1])&&void 0!==a?a:0)+Math.pow(5/7,r)}}return null!==(n=e[t])&&void 0!==n?n:3.5}}();function w(e,t,n,r){var a=e.length;function i(e,t){return 1/(1+Math.pow(10,(t-e)/400))}for(var s=function(t){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=1,s=0;s<a;s++)n&&t===e[s]?n=!1:r+=i(e[s],t);return r},o=s(t,!0),c=Math.sqrt(o*n),l=0,u=5e3;u-l>.01;){var d=(l+u)/2;s(d)<c?u=d:l=d}return(l-t)/(1+b(r))}function y(e,t){return"".concat(e.toLocaleLowerCase(),":").concat(t.toLocaleLowerCase())}var C=n(5954),k=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function S(e,t){return N.apply(this,arguments)}function N(){return(N=(0,a.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0);case 11:if(!n){e.next=14;break}return e.next=14,k(n);case 14:throw new Error("\u6570\u636e\u83b7\u53d6\u9519\u8bef");case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var _=n(5236),I=n(5570),W=n(83),E=n(9827),L=n(1527);function M(){var e=(0,I.Z)();return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(W.Z,{}),(0,L.jsx)(Z.Z,{sx:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:e.palette.background.default},children:(0,L.jsxs)(Z.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",color:e.palette.text.primary},children:["Loading ",(0,L.jsx)(E.Z,{color:"secondary",sx:{ml:1}})]})})]})}var T=n(7274),A=n(7709),D=function(e){var t=e.text,n=e.onClose,r=(0,o.useState)(!0),a=r[0],i=r[1],s=function(){i(!1),n&&n()};return(0,L.jsx)(T.Z,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a,onClose:s,autoHideDuration:4e3,sx:{maxWidth:1e3},children:(0,L.jsx)(A.Z,{severity:"error",onClose:s,sx:{whiteSpace:"nowrap"},children:t})})},F=n(8370);function P(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=function(){var e=(0,a.Z)(s().mark((function e(t){var n,r,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=(null!==(n="https://raw.githubusercontent.com/XYShaoKang/leetcode-predictor/master,https://testingcf.jsdelivr.net/gh/XYShaoKang/leetcode-predictor,https://cdn.jsdelivr.net/gh/XYShaoKang/leetcode-predictor")?n:"").split(",")).length>1)){e.next=8;break}return e.next=4,Promise.race(r.map((function(e){return S(e+t,3e3)})));case 4:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",S((null!==(i=r[0])&&void 0!==i?i:"")+t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function U(){var e,t=null===(e=(0,C.useRouter)().query)||void 0===e?void 0:e.slug,n=(0,c.ZP)(t?"/data/".concat(t,".json"):null,O),a=n.data,i=n.error,s=n.isLoading,b=(0,o.useMemo)((function(){if(!a)return new Map;var e,t=new Map,n=P(a.totalRank);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=y(r.data_region,r.username);t.set(i,r)}}catch(s){n.e(s)}finally{n.f()}return t}),[a]),k=(0,o.useMemo)((function(){var e;return null!==(e=null===a||void 0===a?void 0:a.totalRank.map((function(e){return e.rating})))&&void 0!==e?e:[]}),[a]),S=(0,o.useState)(0),N=S[0],I=S[1],W=(0,o.useState)(0),E=W[0],T=W[1],A=(0,o.useState)(0),R=A[0],U=A[1],X=(0,o.useState)(0),B=X[0],H=X[1],Y=(0,o.useState)("CN"),K=Y[0],q=Y[1],z=(0,o.useState)(""),$=z[0],G=z[1],J=(0,o.useState)([]),Q=J[0],V=J[1],ee=(0,o.useRef)(),te=(0,o.useState)(""),ne=te[0],re=te[1];(0,o.useEffect)((function(){var e;return Q.length&&(e=setTimeout((function(){var e=ee.current;e&&(e.scrollTop=e.scrollHeight-e.clientHeight)}),100)),function(){clearTimeout(e)}}),[Q]);var ae=function(e){return function(t){switch(e){case"rating":I(Number(t.target.value));break;case"rank1":T(Number(t.target.value));break;case"rank2":U(Number(t.target.value));break;case"attendedContestsCount":H(Number(t.target.value));break;case"region":q(t.target.value);break;case"username":G(t.target.value);break;default:throw new Error("\u65e0\u6548\u7684 key")}}};if(s)return(0,L.jsx)(M,{});if(i)return(0,L.jsxs)("div",{children:["\u4e0d\u5b58\u5728 ",t," \u7684\u6bd4\u8d5b\u6570\u636e"]});if(!a)return null;var ie=a.info;return(0,L.jsxs)(_.Z,{pageName:"\u5b9e\u65f6\u9884\u6d4b",title:"".concat(ie.contest.title," - \u5b9e\u65f6\u9884\u6d4b"),children:[ne&&(0,L.jsx)(D,{text:ne,onClose:function(){re("")}}),(0,L.jsx)(l.Z,{maxWidth:"lg",sx:{mt:2},children:(0,L.jsx)(u.Z,{variant:"h4",gutterBottom:!0,sx:{ml:2},children:ie.contest.title})}),(0,L.jsxs)(l.Z,{maxWidth:"lg",sx:{mt:2,display:"flex",flexWrap:"wrap"},children:[(0,L.jsxs)(d.Z,{sx:{m:2,p:2,display:"flex",alignItems:"center",flexDirection:"column",width:300},children:[(0,L.jsx)(u.Z,{variant:"h5",gutterBottom:!0,children:"\u901a\u8fc7\u4e3b\u9875 ID \u9884\u6d4b"}),(0,L.jsxs)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:[(0,L.jsx)(f.Z,{id:"region-label",children:"\u533a\u57df"}),(0,L.jsxs)(x.Z,{labelId:"region-label",id:"region",value:K,onChange:ae("region"),label:"\u533a\u57df",children:[(0,L.jsx)(v.Z,{value:"CN",children:"CN"}),(0,L.jsx)(v.Z,{value:"US",children:"US"})]})]}),(0,L.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,L.jsx)(m.Z,{id:"username",label:(0,L.jsxs)(L.Fragment,{children:["\u4e2a\u4eba\u4e3b\u9875 ID",(0,L.jsx)(g.Z,{title:"\u6253\u5f00\u4e2a\u4eba\u4e3b\u9875\uff0c\u5176\u4e2d URL \u7684\u6700\u540e\u4e00\u6bb5\u5c31\u662f\u4e86",placement:"right",children:(0,L.jsx)(p.Z,{children:(0,L.jsx)(F.Z,{})})})]}),variant:"standard",value:$,onChange:ae("username"),InputLabelProps:{shrink:!0}})}),(0,L.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,L.jsx)(m.Z,{id:"rank1",label:(0,L.jsxs)(L.Fragment,{children:["\u5168\u7403\u6392\u540d",(0,L.jsx)(g.Z,{title:"\u53ef\u4ee5\u5728\u6bd4\u8d5b\u6392\u540d\u9875\u4e2d\uff0c\u9009\u4e2d\u53f3\u4e0a\u89d2\u7684\u300c\u663e\u793a\u5168\u7403\u300d\uff0c\u67e5\u770b\u5f53\u524d\u7684\u5168\u7403\u6392\u540d",placement:"right",children:(0,L.jsx)(p.Z,{children:(0,L.jsx)(F.Z,{})})})]}),type:"number",variant:"standard",value:E,onChange:ae("rank1")})}),(0,L.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,L.jsx)(j.Z,{variant:"contained",onClick:function(){if($)if(E){var e=y(K,$),t=b.get(e);if(t){var n=t.rating,a=t.acc,i=w(k,n,E,a);V((function(e){return[].concat((0,r.Z)(e),["\u3010\u533a\u57df\uff1a".concat(K,"\uff0c\u7528\u6237\u540d\uff1a").concat($,"\uff0c\u5f53\u524d\u6392\u540d\uff1a").concat(E,"\u3011\u9884\u6d4b\u7ed3\u679c\u4e3a\uff1a ").concat(i)])}))}else re("\u65e0\u6cd5\u627e\u5230\u5f53\u524d\u7528\u6237\uff0c\u8bf7\u4f7f\u7528\u53e6\u4e00\u79cd\u65b9\u5f0f\u9884\u6d4b")}else re("\u8bf7\u8f93\u5165\u3010\u5f53\u524d\u6392\u540d\u3011");else re("\u8bf7\u8f93\u5165\u3010\u4e2a\u4eba\u4e3b\u9875 ID\u3011\uff0c\u6253\u5f00\u4e2a\u4eba\u4e3b\u9875\uff0c\u5176\u4e2d URL \u7684\u6700\u540e\u4e00\u6bb5\u5c31\u662f\u4e86")},children:"\u9884\u6d4b"})})]}),(0,L.jsxs)(d.Z,{sx:{m:2,p:2,display:"flex",alignItems:"center",flexDirection:"column",width:300},children:[(0,L.jsx)(u.Z,{variant:"h5",gutterBottom:!0,children:"\u901a\u8fc7\u5206\u6570\u9884\u6d4b"}),(0,L.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,L.jsx)(m.Z,{id:"rating",label:(0,L.jsxs)(L.Fragment,{children:["\u5f53\u524d\u5206\u6570",(0,L.jsx)(g.Z,{title:"\u53c2\u52a0\u8fd9\u573a\u6bd4\u8d5b\u65f6\u7684\u5206\u6570",placement:"right",children:(0,L.jsx)(p.Z,{children:(0,L.jsx)(F.Z,{})})})]}),type:"number",variant:"standard",value:N,onChange:ae("rating")})}),(0,L.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,L.jsx)(m.Z,{id:"attendedContestsCount",label:(0,L.jsxs)(L.Fragment,{children:["\u5386\u53f2\u573a\u6b21",(0,L.jsx)(g.Z,{title:"30 \u573a\u4ee5\u4e0a\u7684\u8bdd\uff0c\u53ef\u4ee5\u76f4\u63a5\u5199\u6210 100\uff0c\u5bf9\u9884\u6d4b\u7ed3\u679c\u7684\u5f71\u54cd\u4e0d\u4f1a\u592a\u5927",placement:"right",children:(0,L.jsx)(p.Z,{children:(0,L.jsx)(F.Z,{})})})]}),type:"number",variant:"standard",value:B,onChange:ae("attendedContestsCount")})}),(0,L.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,L.jsx)(m.Z,{id:"rank2",label:(0,L.jsxs)(L.Fragment,{children:["\u5168\u7403\u6392\u540d",(0,L.jsx)(g.Z,{title:"\u53ef\u4ee5\u5728\u6bd4\u8d5b\u6392\u540d\u9875\u4e2d\uff0c\u9009\u4e2d\u53f3\u4e0a\u89d2\u7684\u300c\u663e\u793a\u5168\u7403\u300d\uff0c\u67e5\u770b\u5f53\u524d\u7684\u5168\u7403\u6392\u540d",placement:"right",children:(0,L.jsx)(p.Z,{children:(0,L.jsx)(F.Z,{})})})]}),type:"number",variant:"standard",value:R,onChange:ae("rank2")})}),(0,L.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,L.jsx)(j.Z,{variant:"contained",onClick:function(){if(N)if(R){var e=w(k,N,R,B);V((function(t){return[].concat((0,r.Z)(t),["\u3010\u5f53\u524d\u5206\u6570\uff1a".concat(N,"\uff0c\u5386\u53f2\u573a\u6b21\uff1a").concat(B,"\uff0c\u5f53\u524d\u6392\u540d\uff1a").concat(R,"\u3011\u9884\u6d4b\u7ed3\u679c\u4e3a\uff1a ").concat(e)])}))}else re("\u8bf7\u8f93\u5165\u3010\u5f53\u524d\u6392\u540d\u3011");else re("\u8bf7\u8f93\u5165\u3010\u5206\u6570\u3011")},children:"\u9884\u6d4b"})})]}),!!Q.length&&(0,L.jsxs)(d.Z,{sx:{ml:2,p:2,width:"100%"},children:[(0,L.jsx)(u.Z,{variant:"h5",gutterBottom:!0,children:"\u9884\u6d4b\u7ed3\u679c"}),(0,L.jsx)(Z.Z,{sx:{maxHeight:200,overflowY:"auto",bgcolor:"text.disabled"},ref:ee,children:Q.map((function(e,t){return(0,L.jsx)(u.Z,{variant:"subtitle1",children:e},t)}))})]})]})]})}},2607:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/real-time-predict",function(){return n(1455)}])}},function(e){e.O(0,[212,774,888,179],(function(){return t=2607,e(e.s=t);var t}));var t=e.O();_N_E=t}]);