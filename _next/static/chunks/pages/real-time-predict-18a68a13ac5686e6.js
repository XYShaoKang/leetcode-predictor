(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{1455:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return P}});var r=n(3102),a=n(8817),i=n(7628),o=n.n(i),s=n(959),u=n(4083),c=n(9175),l=n(6554),d=n(9006),f=n(8524),h=n(4371),v=n(7188),x=n(5925),m=n(9777),p=n(8273),g=n(4761),j=function(){var t;return function(e){var n;if(e>100)return 3.5;if(!t){t=[];for(var r=0;r<=100;r++){var a;t[r]=(null!==(a=t[r-1])&&void 0!==a?a:0)+Math.pow(5/7,r)}}return null!==(n=t[e])&&void 0!==n?n:3.5}}();function b(t,e,n,r){var a=t.length;function i(t,e){return 1/(1+Math.pow(10,(e-t)/400))}for(var o=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=1,o=0;o<a;o++)n&&e===t[o]?n=!1:r+=i(t[o],e);return r},s=o(e,!0),u=Math.sqrt(s*n),c=0,l=5e3;l-c>.01;){var d=(c+l)/2;o(d)<u?l=d:c=d}return(c-e)/(1+j(r))}function Z(t,e){return"".concat(t.toLocaleLowerCase(),":").concat(e.toLocaleLowerCase())}var w=n(5954),y=function(t){return new Promise((function(e){return setTimeout(e,t)}))};function C(t,e){return k.apply(this,arguments)}function k(){return(k=(0,a.Z)(o().mark((function t(e,n){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:return r=t.sent,t.next=6,r.json();case 6:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t.catch(0);case 11:if(!n){t.next=14;break}return t.next=14,y(n);case 14:throw new Error("\u6570\u636e\u83b7\u53d6\u9519\u8bef");case 15:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}var S=n(5236),N=n(5570),_=n(83),W=n(9827),I=n(1527);function E(){var t=(0,N.Z)();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(_.Z,{}),(0,I.jsx)(g.Z,{sx:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:t.palette.background.default},children:(0,I.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",color:t.palette.text.primary},children:["Loading ",(0,I.jsx)(W.Z,{color:"secondary",sx:{ml:1}})]})})]})}var M=n(7274),L=n(7709),T=function(t){var e=t.text,n=t.onClose,r=(0,s.useState)(!0),a=r[0],i=r[1],o=function(){i(!1),n&&n()};return(0,I.jsx)(M.Z,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a,onClose:o,autoHideDuration:4e3,sx:{maxWidth:1e3},children:(0,I.jsx)(L.Z,{severity:"error",onClose:o,sx:{whiteSpace:"nowrap"},children:e})})};function A(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return D(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var O=function(){var t=(0,a.Z)(o().mark((function t(e){var n,r,a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=(null!==(n="https://raw.githubusercontent.com/XYShaoKang/leetcode-predictor/master,https://testingcf.jsdelivr.net/gh/XYShaoKang/leetcode-predictor,https://cdn.jsdelivr.net/gh/XYShaoKang/leetcode-predictor")?n:"").split(",")).length>1)){t.next=8;break}return t.next=4,Promise.race(r.map((function(t){return C(t+e,3e3)})));case 4:return a=t.sent,t.abrupt("return",a);case 8:return t.abrupt("return",C((null!==(i=r[0])&&void 0!==i?i:"")+e));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function P(){var t,e=null===(t=(0,w.useRouter)().query)||void 0===t?void 0:t.slug,n=(0,u.ZP)(e?"/data/".concat(e,".json"):null,O),a=n.data,i=n.error,o=n.isLoading,j=(0,s.useMemo)((function(){if(!a)return new Map;var t,e=new Map,n=A(a.totalRank);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=Z(r.data_region,r.username);e.set(i,r)}}catch(o){n.e(o)}finally{n.f()}return e}),[a]),y=(0,s.useMemo)((function(){var t;return null!==(t=null===a||void 0===a?void 0:a.totalRank.map((function(t){return t.rating})))&&void 0!==t?t:[]}),[a]),C=(0,s.useState)(0),k=C[0],N=C[1],_=(0,s.useState)(0),W=_[0],M=_[1],L=(0,s.useState)(0),D=L[0],P=L[1],R=(0,s.useState)(0),X=R[0],B=R[1],H=(0,s.useState)("CN"),U=H[0],Y=H[1],K=(0,s.useState)(""),q=K[0],z=K[1],F=(0,s.useState)([]),$=F[0],G=F[1],J=(0,s.useRef)(),Q=(0,s.useState)(""),V=Q[0],tt=Q[1];(0,s.useEffect)((function(){var t;return $.length&&(t=setTimeout((function(){var t=J.current;t&&(t.scrollTop=t.scrollHeight-t.clientHeight)}),100)),function(){clearTimeout(t)}}),[$]);var et=function(t){return function(e){switch(t){case"rating":N(Number(e.target.value));break;case"rank1":M(Number(e.target.value));break;case"rank2":P(Number(e.target.value));break;case"attendedContestsCount":B(Number(e.target.value));break;case"region":Y(e.target.value);break;case"username":z(e.target.value);break;default:throw new Error("\u65e0\u6548\u7684 key")}}};if(o)return(0,I.jsx)(E,{});if(i)return(0,I.jsxs)("div",{children:["\u4e0d\u5b58\u5728 ",e," \u7684\u6bd4\u8d5b\u6570\u636e"]});if(!a)return null;var nt=a.info;return(0,I.jsxs)(S.Z,{pageName:"\u5b9e\u65f6\u9884\u6d4b",title:"".concat(nt.contest.title," - \u5b9e\u65f6\u9884\u6d4b"),children:[V&&(0,I.jsx)(T,{text:V,onClose:function(){tt("")}}),(0,I.jsx)(c.Z,{maxWidth:"lg",sx:{mt:2},children:(0,I.jsx)(l.Z,{variant:"h4",gutterBottom:!0,sx:{ml:2},children:nt.contest.title})}),(0,I.jsxs)(c.Z,{maxWidth:"lg",sx:{mt:2,display:"flex",flexWrap:"wrap"},children:[(0,I.jsxs)(d.Z,{sx:{m:2,p:2,display:"flex",alignItems:"center",flexDirection:"column",width:300},children:[(0,I.jsx)(l.Z,{variant:"h5",gutterBottom:!0,children:"\u901a\u8fc7\u4e3b\u9875 ID \u9884\u6d4b"}),(0,I.jsxs)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:[(0,I.jsx)(h.Z,{id:"region-label",children:"\u533a\u57df"}),(0,I.jsxs)(v.Z,{labelId:"region-label",id:"region",value:U,onChange:et("region"),label:"\u533a\u57df",children:[(0,I.jsx)(x.Z,{value:"CN",children:"CN"}),(0,I.jsx)(x.Z,{value:"US",children:"US"})]})]}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(m.Z,{id:"username",label:"\u4e2a\u4eba\u4e3b\u9875 ID",variant:"standard",value:q,onChange:et("username")})}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(m.Z,{id:"rank1",label:"\u5f53\u524d\u5168\u7403\u6392\u540d",type:"number",variant:"standard",value:W,onChange:et("rank1")})}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(p.Z,{variant:"contained",onClick:function(){if(q)if(W){var t=Z(U,q),e=j.get(t);if(e){var n=e.rating,a=e.acc,i=b(y,n,W,a);G((function(t){return[].concat((0,r.Z)(t),["\u3010\u533a\u57df\uff1a".concat(U,"\uff0c\u7528\u6237\u540d\uff1a").concat(q,"\uff0c\u5f53\u524d\u6392\u540d\uff1a").concat(W,"\u3011\u9884\u6d4b\u7ed3\u679c\u4e3a\uff1a ").concat(i)])}))}else tt("\u65e0\u6cd5\u627e\u5230\u5f53\u524d\u7528\u6237\uff0c\u8bf7\u4f7f\u7528\u53e6\u4e00\u79cd\u65b9\u5f0f\u9884\u6d4b")}else tt("\u8bf7\u8f93\u5165\u3010\u5f53\u524d\u6392\u540d\u3011");else tt("\u8bf7\u8f93\u5165\u3010\u4e2a\u4eba\u4e3b\u9875 ID\u3011\uff0c\u6253\u5f00\u4e2a\u4eba\u4e3b\u9875\uff0c\u5176\u4e2d URL \u7684\u6700\u540e\u4e00\u6bb5\u5c31\u662f\u4e86")},children:"\u9884\u6d4b"})})]}),(0,I.jsxs)(d.Z,{sx:{m:2,p:2,display:"flex",alignItems:"center",flexDirection:"column",width:300},children:[(0,I.jsx)(l.Z,{variant:"h5",gutterBottom:!0,children:"\u901a\u8fc7\u5206\u6570\u9884\u6d4b"}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(m.Z,{id:"rating",label:"\u5206\u6570",type:"number",variant:"standard",value:k,onChange:et("rating")})}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(m.Z,{id:"attendedContestsCount",label:"\u5386\u53f2\u573a\u6b21\uff0830 \u573a\u4ee5\u4e0a\u7684\u8bdd\uff0c\u53ef\u4ee5\u5168\u90e8\u7edf\u4e00\u5199\u6210 100\uff09",type:"number",variant:"standard",value:X,onChange:et("attendedContestsCount")})}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(m.Z,{id:"rank2",label:"\u5f53\u524d\u5168\u7403\u6392\u540d",type:"number",variant:"standard",value:D,onChange:et("rank2")})}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(p.Z,{variant:"contained",onClick:function(){if(k)if(D){var t=b(y,k,D,X);G((function(e){return[].concat((0,r.Z)(e),["\u3010\u5f53\u524d\u5206\u6570\uff1a".concat(k,"\uff0c\u5386\u53f2\u573a\u6b21\uff1a").concat(X,"\uff0c\u5f53\u524d\u6392\u540d\uff1a").concat(D,"\u3011\u9884\u6d4b\u7ed3\u679c\u4e3a\uff1a ").concat(t)])}))}else tt("\u8bf7\u8f93\u5165\u3010\u5f53\u524d\u6392\u540d\u3011");else tt("\u8bf7\u8f93\u5165\u3010\u5206\u6570\u3011")},children:"\u9884\u6d4b"})})]}),!!$.length&&(0,I.jsxs)(d.Z,{sx:{ml:2,p:2,width:"100%"},children:[(0,I.jsx)(l.Z,{variant:"h5",gutterBottom:!0,children:"\u9884\u6d4b\u7ed3\u679c"}),(0,I.jsx)(g.Z,{sx:{maxHeight:200,overflowY:"auto",bgcolor:"text.disabled"},ref:J,children:$.map((function(t,e){return(0,I.jsx)(l.Z,{variant:"subtitle1",children:t},e)}))})]})]})]})}},2607:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/real-time-predict",function(){return n(1455)}])}},function(t){t.O(0,[283,774,888,179],(function(){return e=2607,t(t.s=e);var e}));var e=t.O();_N_E=e}]);