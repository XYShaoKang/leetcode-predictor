(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{7743:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(5570),a=n(83),i=n(4761),s=n(9827),c=n(1527);function o(){var t=(0,r.Z)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.Z,{}),(0,c.jsx)(i.Z,{sx:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:t.palette.background.default},children:(0,c.jsxs)(i.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",color:t.palette.text.primary},children:["Loading ",(0,c.jsx)(s.Z,{color:"secondary",sx:{ml:1}})]})})]})}},9355:function(t,e,n){"use strict";n.d(e,{Yu:function(){return c}});var r=n(8817),a=n(7628),i=n.n(a),s=function(t){return new Promise((function(e){return setTimeout(e,t)}))};function c(t,e){return o.apply(this,arguments)}function o(){return(o=(0,r.Z)(i().mark((function t(e,n){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:return r=t.sent,t.next=6,r.json();case 6:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t.catch(0);case 11:if(!n){t.next=14;break}return t.next=14,s(n);case 14:throw new Error("\u6570\u636e\u83b7\u53d6\u9519\u8bef");case 15:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}},2558:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return D},getSha:function(){return Y}});var r=n(3102),a=n(8817),i=n(7628),s=n.n(i),c=n(959),o=n(4083),u=n(9175),l=n(6554),d=n(9006),h=n(8524),f=n(4371),x=n(3721),v=n(3520),m=n(9777),p=n(8777),g=n(6980),j=n(8273),Z=n(4761),b=function(){var t;return function(e){var n;if(e>100)return 3.5;if(!t){t=[];for(var r=0;r<=100;r++){var a;t[r]=(null!==(a=t[r-1])&&void 0!==a?a:0)+Math.pow(5/7,r)}}return null!==(n=t[e])&&void 0!==n?n:3.5}}();function w(t,e,n,r){var a=t.length;function i(t,e){return 1/(1+Math.pow(10,(e-t)/400))}for(var s=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=1,s=0;s<a;s++)n&&e===t[s]?n=!1:r+=i(t[s],e);return r},c=s(e,!0),o=Math.sqrt(c*n),u=0,l=5e3;l-u>.01;){var d=(u+l)/2;s(d)<o?l=d:u=d}return(u-e)/(1+b(r))}function y(t,e){return"".concat(t.toLocaleLowerCase(),":").concat(e.toLocaleLowerCase())}var k=n(5954),C=n(9355),S=n(3185),N=n(7743),_=n(7274),I=n(7709),W=n(1527),E=function(t){var e=t.text,n=t.onClose,r=(0,c.useState)(!0),a=r[0],i=r[1],s=function(){i(!1),n&&n()};return(0,W.jsx)(_.Z,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a,onClose:s,autoHideDuration:4e3,sx:{maxWidth:1e3},children:(0,W.jsx)(I.Z,{severity:"error",onClose:s,sx:{whiteSpace:"nowrap"},children:e})})},L=n(8370);function M(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return T(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Y=function(){var t=(0,a.Z)(s().mark((function t(e,n,r){var a,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://api.github.com/repos/".concat(e,"/").concat(n,"/commits/").concat(r),{cache:"no-cache",credentials:"omit"});case 3:return a=t.sent,t.next=6,a.json();case 6:if(i=t.sent,403!==a.status){t.next=9;break}throw new Error(i.message);case 9:return t.abrupt("return",i.sha);case 12:t.prev=12,t.t0=t.catch(0);case 14:return t.abrupt("return","master");case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e,n,r){return t.apply(this,arguments)}}(),A=function(){var t=(0,a.Z)(s().mark((function t(e){var n,r,a,i,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Y("XYShaoKang","leetcode-predictor","master"),!((a=(null!==(n="https://raw.githubusercontent.com/XYShaoKang/leetcode-predictor/,https://cdn.jsdelivr.net/gh/XYShaoKang/leetcode-predictor@")?n:"").split(",").map((function(t){return t+r}))).length>1)){t.next=9;break}return t.next=5,Promise.race(a.map((function(t){return(0,C.Yu)(t+e,3e3)})));case 5:return i=t.sent,t.abrupt("return",i);case 9:return t.abrupt("return",(0,C.Yu)((null!==(c=a[0])&&void 0!==c?c:"")+e));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function D(){var t,e=null===(t=(0,k.useRouter)().query)||void 0===t?void 0:t.slug,n=(0,o.ZP)(e?"/data/".concat(e,".json"):null,A),a=n.data,i=n.error,s=n.isLoading,b=(0,c.useMemo)((function(){if(!a)return new Map;var t,e=new Map,n=M(a.totalRank);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=y(r.data_region,r.username);e.set(i,r)}}catch(s){n.e(s)}finally{n.f()}return e}),[a]),C=(0,c.useMemo)((function(){var t;return null!==(t=null===a||void 0===a?void 0:a.totalRank.map((function(t){return t.rating})))&&void 0!==t?t:[]}),[a]),_=(0,c.useState)(0),I=_[0],T=_[1],Y=(0,c.useState)(0),D=Y[0],F=Y[1],P=(0,c.useState)(0),R=P[0],O=P[1],U=(0,c.useState)(0),X=U[0],B=U[1],H=(0,c.useState)("CN"),K=H[0],q=H[1],z=(0,c.useState)(""),$=z[0],G=z[1],J=(0,c.useState)([]),Q=J[0],V=J[1],tt=(0,c.useRef)(),et=(0,c.useState)(""),nt=et[0],rt=et[1];(0,c.useEffect)((function(){var t;return Q.length&&(t=setTimeout((function(){var t=tt.current;t&&(t.scrollTop=t.scrollHeight-t.clientHeight)}),100)),function(){clearTimeout(t)}}),[Q]);var at=function(t){return function(e){switch(t){case"rating":T(Number(e.target.value));break;case"rank1":F(Number(e.target.value));break;case"rank2":O(Number(e.target.value));break;case"attendedContestsCount":B(Number(e.target.value));break;case"region":q(e.target.value);break;case"username":G(e.target.value);break;default:throw new Error("\u65e0\u6548\u7684 key")}}};if(s)return(0,W.jsx)(N.Z,{});if(i)return(0,W.jsxs)("div",{children:["\u4e0d\u5b58\u5728 ",e," \u7684\u6bd4\u8d5b\u6570\u636e"]});if(!a)return null;var it=a.info;return(0,W.jsxs)(S.Z,{pageName:"\u5b9e\u65f6\u9884\u6d4b",title:"".concat(it.contest.title," - \u5b9e\u65f6\u9884\u6d4b"),children:[nt&&(0,W.jsx)(E,{text:nt,onClose:function(){rt("")}}),(0,W.jsx)(u.Z,{maxWidth:"lg",sx:{mt:2},children:(0,W.jsx)(l.Z,{variant:"h4",gutterBottom:!0,sx:{ml:2},children:it.contest.title})}),(0,W.jsxs)(u.Z,{maxWidth:"lg",sx:{mt:2,display:"flex",flexWrap:"wrap"},children:[(0,W.jsxs)(d.Z,{sx:{m:2,p:2,display:"flex",alignItems:"center",flexDirection:"column",width:300},children:[(0,W.jsx)(l.Z,{variant:"h5",gutterBottom:!0,children:"\u901a\u8fc7\u4e3b\u9875 ID \u9884\u6d4b"}),(0,W.jsxs)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:[(0,W.jsx)(f.Z,{id:"region-label",children:"\u533a\u57df"}),(0,W.jsxs)(x.Z,{labelId:"region-label",id:"region",value:K,onChange:at("region"),label:"\u533a\u57df",children:[(0,W.jsx)(v.Z,{value:"CN",children:"CN"}),(0,W.jsx)(v.Z,{value:"US",children:"US"})]})]}),(0,W.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,W.jsx)(m.Z,{id:"username",label:(0,W.jsxs)(W.Fragment,{children:["\u4e2a\u4eba\u4e3b\u9875 ID",(0,W.jsx)(p.Z,{title:"\u6253\u5f00\u4e2a\u4eba\u4e3b\u9875\uff0c\u5176\u4e2d URL \u7684\u6700\u540e\u4e00\u6bb5\u5c31\u662f\u4e86",placement:"right",children:(0,W.jsx)(g.Z,{children:(0,W.jsx)(L.Z,{})})})]}),variant:"standard",value:$,onChange:at("username"),InputLabelProps:{shrink:!0}})}),(0,W.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,W.jsx)(m.Z,{id:"rank1",label:(0,W.jsxs)(W.Fragment,{children:["\u5168\u7403\u6392\u540d",(0,W.jsx)(p.Z,{title:"\u53ef\u4ee5\u5728\u6bd4\u8d5b\u6392\u540d\u9875\u4e2d\uff0c\u9009\u4e2d\u53f3\u4e0a\u89d2\u7684\u300c\u663e\u793a\u5168\u7403\u300d\uff0c\u67e5\u770b\u5f53\u524d\u7684\u5168\u7403\u6392\u540d",placement:"right",children:(0,W.jsx)(g.Z,{children:(0,W.jsx)(L.Z,{})})})]}),type:"number",variant:"standard",value:D,onChange:at("rank1")})}),(0,W.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,W.jsx)(j.Z,{variant:"contained",onClick:function(){if($)if(D){var t=y(K,$),e=b.get(t);if(e){var n=e.rating,a=e.acc,i=w(C,n,D,a);V((function(t){return[].concat((0,r.Z)(t),["\u3010\u533a\u57df\uff1a".concat(K,"\uff0c\u7528\u6237\u540d\uff1a").concat($,"\uff0c\u5f53\u524d\u6392\u540d\uff1a").concat(D,"\u3011\u9884\u6d4b\u7ed3\u679c\u4e3a\uff1a ").concat(i)])}))}else rt("\u65e0\u6cd5\u627e\u5230\u5f53\u524d\u7528\u6237\uff0c\u8bf7\u4f7f\u7528\u53e6\u4e00\u79cd\u65b9\u5f0f\u9884\u6d4b")}else rt("\u8bf7\u8f93\u5165\u3010\u5f53\u524d\u6392\u540d\u3011");else rt("\u8bf7\u8f93\u5165\u3010\u4e2a\u4eba\u4e3b\u9875 ID\u3011\uff0c\u6253\u5f00\u4e2a\u4eba\u4e3b\u9875\uff0c\u5176\u4e2d URL \u7684\u6700\u540e\u4e00\u6bb5\u5c31\u662f\u4e86")},children:"\u9884\u6d4b"})})]}),(0,W.jsxs)(d.Z,{sx:{m:2,p:2,display:"flex",alignItems:"center",flexDirection:"column",width:300},children:[(0,W.jsx)(l.Z,{variant:"h5",gutterBottom:!0,children:"\u901a\u8fc7\u5206\u6570\u9884\u6d4b"}),(0,W.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,W.jsx)(m.Z,{id:"rating",label:(0,W.jsxs)(W.Fragment,{children:["\u5f53\u524d\u5206\u6570",(0,W.jsx)(p.Z,{title:"\u53c2\u52a0\u8fd9\u573a\u6bd4\u8d5b\u65f6\u7684\u5206\u6570",placement:"right",children:(0,W.jsx)(g.Z,{children:(0,W.jsx)(L.Z,{})})})]}),type:"number",variant:"standard",value:I,onChange:at("rating")})}),(0,W.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,W.jsx)(m.Z,{id:"attendedContestsCount",label:(0,W.jsxs)(W.Fragment,{children:["\u5386\u53f2\u573a\u6b21",(0,W.jsx)(p.Z,{title:"30 \u573a\u4ee5\u4e0a\u7684\u8bdd\uff0c\u53ef\u4ee5\u76f4\u63a5\u5199\u6210 100\uff0c\u5bf9\u9884\u6d4b\u7ed3\u679c\u7684\u5f71\u54cd\u4e0d\u4f1a\u592a\u5927",placement:"right",children:(0,W.jsx)(g.Z,{children:(0,W.jsx)(L.Z,{})})})]}),type:"number",variant:"standard",value:X,onChange:at("attendedContestsCount")})}),(0,W.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,W.jsx)(m.Z,{id:"rank2",label:(0,W.jsxs)(W.Fragment,{children:["\u5168\u7403\u6392\u540d",(0,W.jsx)(p.Z,{title:"\u53ef\u4ee5\u5728\u6bd4\u8d5b\u6392\u540d\u9875\u4e2d\uff0c\u9009\u4e2d\u53f3\u4e0a\u89d2\u7684\u300c\u663e\u793a\u5168\u7403\u300d\uff0c\u67e5\u770b\u5f53\u524d\u7684\u5168\u7403\u6392\u540d",placement:"right",children:(0,W.jsx)(g.Z,{children:(0,W.jsx)(L.Z,{})})})]}),type:"number",variant:"standard",value:R,onChange:at("rank2")})}),(0,W.jsx)(h.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,W.jsx)(j.Z,{variant:"contained",onClick:function(){if(I)if(R){var t=w(C,I,R,X);V((function(e){return[].concat((0,r.Z)(e),["\u3010\u5f53\u524d\u5206\u6570\uff1a".concat(I,"\uff0c\u5386\u53f2\u573a\u6b21\uff1a").concat(X,"\uff0c\u5f53\u524d\u6392\u540d\uff1a").concat(R,"\u3011\u9884\u6d4b\u7ed3\u679c\u4e3a\uff1a ").concat(t)])}))}else rt("\u8bf7\u8f93\u5165\u3010\u5f53\u524d\u6392\u540d\u3011");else rt("\u8bf7\u8f93\u5165\u3010\u5206\u6570\u3011")},children:"\u9884\u6d4b"})})]}),!!Q.length&&(0,W.jsxs)(d.Z,{sx:{ml:2,p:2,width:"100%"},children:[(0,W.jsx)(l.Z,{variant:"h5",gutterBottom:!0,children:"\u9884\u6d4b\u7ed3\u679c"}),(0,W.jsx)(Z.Z,{sx:{maxHeight:200,overflowY:"auto",bgcolor:"text.disabled"},ref:tt,children:Q.map((function(t,e){return(0,W.jsx)(l.Z,{variant:"subtitle1",children:t},e)}))})]})]})]})}},2607:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/real-time-predict",function(){return n(2558)}])}},function(t){t.O(0,[956,600,774,888,179],(function(){return e=2607,t(t.s=e);var e}));var e=t.O();_N_E=e}]);