(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{1455:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return P}});var r=e(3102),a=e(8817),i=e(7628),o=e.n(i),u=e(959),s=e(4083),c=e(9175),l=e(6554),d=e(9006),f=e(8524),h=e(4371),v=e(7188),x=e(5925),m=e(9777),p=e(8273),g=e(4761),j=function(){var t;return function(n){var e;if(n>100)return 3.5;if(!t){t=[];for(var r=0;r<=100;r++){var a;t[r]=(null!==(a=t[r-1])&&void 0!==a?a:0)+Math.pow(5/7,r)}}return null!==(e=t[n])&&void 0!==e?e:3.5}}();function b(t,n,e,r){var a=t.length;function i(t,n){return 1/(1+Math.pow(10,(n-t)/400))}for(var o=function(n){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=1,o=0;o<a;o++)e&&n===t[o]?e=!1:r+=i(t[o],n);return r},u=o(n,!0),s=Math.sqrt(u*e),c=0,l=5e3;l-c>.01;){var d=(c+l)/2;o(d)<s?l=d:c=d}return(c-n)/(1+j(r))}function Z(t,n){return"".concat(t.toLocaleLowerCase(),":").concat(n.toLocaleLowerCase())}var w=e(5954),y=function(t){return new Promise((function(n){return setTimeout(n,t)}))};function C(t,n){return k.apply(this,arguments)}function k(){return(k=(0,a.Z)(o().mark((function t(n,e){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(n);case 3:return r=t.sent,t.next=6,r.json();case 6:return t.abrupt("return",t.sent);case 9:t.prev=9,t.t0=t.catch(0);case 11:if(!e){t.next=14;break}return t.next=14,y(e);case 14:throw new Error("\u6570\u636e\u83b7\u53d6\u9519\u8bef");case 15:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}var S=e(5236),N=e(5570),_=e(83),W=e(9827),I=e(1527);function E(){var t=(0,N.Z)();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(_.Z,{}),(0,I.jsx)(g.Z,{sx:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",bgcolor:t.palette.background.default},children:(0,I.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",color:t.palette.text.primary},children:["Loading ",(0,I.jsx)(W.Z,{color:"secondary",sx:{ml:1}})]})})]})}var M=e(7274),L=e(7709),T=function(t){var n=t.text,e=t.onClose,r=(0,u.useState)(!0),a=r[0],i=r[1],o=function(){i(!1),e&&e()};return(0,I.jsx)(M.Z,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a,onClose:o,autoHideDuration:4e3,sx:{maxWidth:1e3},children:(0,I.jsx)(L.Z,{severity:"error",onClose:o,sx:{whiteSpace:"nowrap"},children:n})})};function A(t,n){var e="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(!t)return;if("string"===typeof t)return D(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return D(t,n)}(t))||n&&t&&"number"===typeof t.length){e&&(t=e);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw i}}}}function D(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var O=function(){var t=(0,a.Z)(o().mark((function t(n){var e,r,a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=(null!==(e="https://raw.githubusercontent.com/XYShaoKang/leetcode-predictor/master")?e:"").split(",")).length>1)){t.next=8;break}return t.next=4,Promise.race(r.map((function(t){return C(t+n,3e3)})));case 4:return a=t.sent,t.abrupt("return",a);case 8:return t.abrupt("return",C((null!==(i=r[0])&&void 0!==i?i:"")+n));case 9:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}();function P(){var t,n=null===(t=(0,w.useRouter)().query)||void 0===t?void 0:t.slug,e=(0,s.ZP)(n?"/data/".concat(n,".json"):null,O),a=e.data,i=e.error,o=e.isLoading,j=(0,u.useMemo)((function(){if(!a)return new Map;var t,n=new Map,e=A(a.totalRank);try{for(e.s();!(t=e.n()).done;){var r=t.value,i=Z(r.data_region,r.username);n.set(i,r)}}catch(o){e.e(o)}finally{e.f()}return n}),[a]),y=(0,u.useMemo)((function(){var t;return null!==(t=null===a||void 0===a?void 0:a.totalRank.map((function(t){return t.rating})))&&void 0!==t?t:[]}),[a]),C=(0,u.useState)(0),k=C[0],N=C[1],_=(0,u.useState)(0),W=_[0],M=_[1],L=(0,u.useState)(0),D=L[0],P=L[1],R=(0,u.useState)(0),B=R[0],H=R[1],U=(0,u.useState)("CN"),X=U[0],q=U[1],Y=(0,u.useState)(""),z=Y[0],F=Y[1],K=(0,u.useState)([]),$=K[0],G=K[1],J=(0,u.useRef)(),Q=(0,u.useState)(""),V=Q[0],tt=Q[1];(0,u.useEffect)((function(){var t;return $.length&&(t=setTimeout((function(){var t=J.current;t&&(t.scrollTop=t.scrollHeight-t.clientHeight)}),100)),function(){clearTimeout(t)}}),[$]);var nt=function(t){return function(n){switch(t){case"rating":N(Number(n.target.value));break;case"rank1":M(Number(n.target.value));break;case"rank2":P(Number(n.target.value));break;case"attendedContestsCount":H(Number(n.target.value));break;case"region":q(n.target.value);break;case"username":F(n.target.value);break;default:throw new Error("\u65e0\u6548\u7684 key")}}};if(o)return(0,I.jsx)(E,{});if(i)return(0,I.jsxs)("div",{children:["\u4e0d\u5b58\u5728 ",n," \u7684\u6bd4\u8d5b\u6570\u636e"]});if(!a)return null;var et=a.info;return(0,I.jsxs)(S.Z,{pageName:"\u5b9e\u65f6\u9884\u6d4b",title:"".concat(et.contest.title," - \u5b9e\u65f6\u9884\u6d4b"),children:[V&&(0,I.jsx)(T,{text:V,onClose:function(){tt("")}}),(0,I.jsx)(c.Z,{maxWidth:"lg",sx:{mt:2},children:(0,I.jsx)(l.Z,{variant:"h4",gutterBottom:!0,sx:{ml:2},children:et.contest.title})}),(0,I.jsxs)(c.Z,{maxWidth:"lg",sx:{mt:2,display:"flex",flexWrap:"wrap"},children:[(0,I.jsxs)(d.Z,{sx:{m:2,p:2,display:"flex",alignItems:"center",flexDirection:"column",width:300},children:[(0,I.jsx)(l.Z,{variant:"h5",gutterBottom:!0,children:"\u901a\u8fc7\u4e3b\u9875 ID \u9884\u6d4b"}),(0,I.jsxs)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:[(0,I.jsx)(h.Z,{id:"region-label",children:"\u533a\u57df"}),(0,I.jsxs)(v.Z,{labelId:"region-label",id:"region",value:X,onChange:nt("region"),label:"\u533a\u57df",children:[(0,I.jsx)(x.Z,{value:"CN",children:"CN"}),(0,I.jsx)(x.Z,{value:"US",children:"US"})]})]}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(m.Z,{id:"username",label:"\u4e2a\u4eba\u4e3b\u9875 ID",variant:"standard",value:z,onChange:nt("username")})}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(m.Z,{id:"rank1",label:"\u5f53\u524d\u6392\u540d",type:"number",variant:"standard",value:W,onChange:nt("rank1")})}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(p.Z,{variant:"contained",onClick:function(){if(z)if(W){var t=Z(X,z),n=j.get(t);if(n){var e=n.rating,a=n.acc,i=b(y,e,W,a);G((function(t){return[].concat((0,r.Z)(t),["\u3010\u533a\u57df\uff1a".concat(X,"\uff0c\u7528\u6237\u540d\uff1a").concat(z,"\uff0c\u5f53\u524d\u6392\u540d\uff1a").concat(W,"\u3011\u9884\u6d4b\u7ed3\u679c\u4e3a\uff1a ").concat(i)])}))}else tt("\u65e0\u6cd5\u627e\u5230\u5f53\u524d\u7528\u6237\uff0c\u8bf7\u4f7f\u7528\u53e6\u4e00\u79cd\u65b9\u5f0f\u9884\u6d4b")}else tt("\u8bf7\u8f93\u5165\u3010\u5f53\u524d\u6392\u540d\u3011");else tt("\u8bf7\u8f93\u5165\u3010\u4e2a\u4eba\u4e3b\u9875 ID\u3011\uff0c\u6253\u5f00\u4e2a\u4eba\u4e3b\u9875\uff0c\u5176\u4e2d URL \u7684\u6700\u540e\u4e00\u6bb5\u5c31\u662f\u4e86")},children:"\u9884\u6d4b"})})]}),(0,I.jsxs)(d.Z,{sx:{m:2,p:2,display:"flex",alignItems:"center",flexDirection:"column",width:300},children:[(0,I.jsx)(l.Z,{variant:"h5",gutterBottom:!0,children:"\u901a\u8fc7\u5206\u6570\u9884\u6d4b"}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(m.Z,{id:"rating",label:"\u5206\u6570",type:"number",variant:"standard",value:k,onChange:nt("rating")})}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(m.Z,{id:"attendedContestsCount",label:"\u5386\u53f2\u573a\u6b21",type:"number",variant:"standard",value:B,onChange:nt("attendedContestsCount")})}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(m.Z,{id:"rank2",label:"\u5f53\u524d\u6392\u540d",type:"number",variant:"standard",value:D,onChange:nt("rank2")})}),(0,I.jsx)(f.Z,{variant:"standard",sx:{m:1,minWidth:200},children:(0,I.jsx)(p.Z,{variant:"contained",onClick:function(){if(k)if(D){var t=b(y,k,D,B);G((function(n){return[].concat((0,r.Z)(n),["\u3010\u5f53\u524d\u5206\u6570\uff1a".concat(k,"\uff0c\u5386\u53f2\u573a\u6b21\uff1a").concat(B,"\uff0c\u5f53\u524d\u6392\u540d\uff1a").concat(D,"\u3011\u9884\u6d4b\u7ed3\u679c\u4e3a\uff1a ").concat(t)])}))}else tt("\u8bf7\u8f93\u5165\u3010\u5f53\u524d\u6392\u540d\u3011");else tt("\u8bf7\u8f93\u5165\u3010\u5206\u6570\u3011")},children:"\u9884\u6d4b"})})]}),!!$.length&&(0,I.jsxs)(d.Z,{sx:{ml:2,p:2,width:"100%"},children:[(0,I.jsx)(l.Z,{variant:"h5",gutterBottom:!0,children:"\u9884\u6d4b\u7ed3\u679c"}),(0,I.jsx)(g.Z,{sx:{maxHeight:200,overflowY:"auto",bgcolor:"text.disabled"},ref:J,children:$.map((function(t,n){return(0,I.jsx)(l.Z,{variant:"subtitle1",children:t},n)}))})]})]})]})}},2607:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/real-time-predict",function(){return e(1455)}])}},function(t){t.O(0,[283,774,888,179],(function(){return n=2607,t(t.s=n);var n}));var n=t.O();_N_E=n}]);